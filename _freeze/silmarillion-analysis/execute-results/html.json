{
  "hash": "c9d463bb536d37714df4d9f1dffcf300",
  "result": {
    "markdown": "---\ntitle: \"Visualizing Characters in The Silmarillion\"\ndate: 2023-08-01\nauthor: Haniah Kring \ncategories: [NLP, networks, j.r.r. tolkien]\ncode-fold: true\nformat: \n  html: \n    page-layout: full\n---\n\n\n\n\n## Word Clouds\n\nWord clouds are a way to visually represent text data and assign importance to each word. The word cloud below shows every character in The Silmarillion where the size of their name is determined by how often they are mentioned throughout the text.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(1)\nwordcloud::wordcloud(\n  words = wordcloud_data$word,\n  freq = wordcloud_data$freq,\n  min.freq = 1,\n  max.words = 200,\n  random.order = FALSE,\n  rot.per = 0.35,\n  colors = RColorBrewer::brewer.pal(8, \"Dark2\")\n)\n```\n\n::: {.cell-output-display}\n![](silmarillion-analysis_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n## Force Networks\n\nForce networks visualize connections between nodes and edges. More practically, nodes are people, places, things, or ideas, while edges are the associations between the aforementioned items. Here, I show all the characters in the chapter \"Beren and Luthien\" and their relationships. Characters who are highly associated together are grouped by colour. Large nodes are main characters in the chapter, while small nodes are minor characters or mentions.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nforceNetwork(\n  Links = links,\n  Nodes = nodes,\n  Source = \"IDsource\",\n  Target = \"IDtarget\",\n  Value = \"value\",\n  NodeID = \"name\",\n  Group = \"group\",\n  fontSize = 18,\n  Nodesize = \"size\",\n  opacity = 1\n)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"forceNetwork html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-52af2e5b6fb0322de58a\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-52af2e5b6fb0322de58a\">{\"x\":{\"links\":{\"source\":[0,1,0,2,3,4,2,5,0,0,2,3,0,0,2,6,7,3,3,5,0,1,8,9,4,4,2,2,6,7,7,3,5,5,5,10,10,0,0,0,0,0,11,12,12,12,13,13,13,1,1,1,1,8,8,8,8,14,15,15,15,15,16,16,17,17,17,17,4,4,4,4,4,4,4,4,4,2,2,2,2,2,2,6,18,19,20,21,21,21,21,22,22,23,23,23,7,7,3,3,24],\"target\":[2,8,3,0,0,2,3,21,5,1,1,2,4,25,8,0,4,1,25,7,8,2,0,3,0,1,26,7,3,0,25,16,27,17,4,0,3,11,12,15,16,21,5,14,21,3,1,8,4,0,16,4,3,1,16,4,2,7,5,0,11,28,1,8,27,5,29,7,10,12,8,14,6,21,23,3,30,12,4,19,25,30,31,10,16,26,26,0,4,7,32,1,8,12,1,21,29,21,8,21,21],\"value\":[22,12,8,6,6,5,5,4,4,4,4,4,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],\"colour\":[\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\"]},\"nodes\":{\"name\":[\"Beren\",\"Celegorm\",\"Lúthien\",\"Thingol\",\"Huan\",\"Barahir\",\"Mablung\",\"Sauron\",\"Curufin\",\"Daeron\",\"Beleg\",\"Bëor\",\"Carcharoth\",\"Celebrimbor\",\"Draugluin\",\"Finrod\",\"Fëanor\",\"Gorlim\",\"Maglor\",\"Mandos\",\"Manwë\",\"Morgoth\",\"Orodreth\",\"Oromë\",\"Varda\",\"Melian\",\"Ilúvatar\",\"Angrim\",\"Finarfin\",\"Eilinel\",\"Thuringwethil\",\"Turgon\",\"Thorondor\"],\"group\":[4,2,4,4,4,1,4,1,2,4,4,3,1,2,1,3,2,6,11,5,12,1,2,1,7,4,5,6,8,6,4,10,9],\"nodesize\":[76,36,62,41,30,16,7,16,28,2,4,3,7,3,3,5,8,5,1,2,1,15,2,4,1,9,4,2,1,2,2,1,1]},\"options\":{\"NodeID\":\"name\",\"Group\":\"group\",\"colourScale\":\"d3.scaleOrdinal(d3.schemeCategory20);\",\"fontSize\":18,\"fontFamily\":\"serif\",\"clickTextSize\":45,\"linkDistance\":50,\"linkWidth\":\"function(d) { return Math.sqrt(d.value); }\",\"charge\":-30,\"opacity\":1,\"zoom\":false,\"legend\":false,\"arrows\":false,\"nodesize\":true,\"radiusCalculation\":\" Math.sqrt(d.nodesize)+6\",\"bounded\":false,\"opacityNoHover\":0,\"clickAction\":null}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n## Chord Diagrams\n\nChord diagrams help represent flows between sets of entities. Similar to the force network above, the diagram below shows characters and their relationships.\n\n\n::: {.cell max.height='100px' fig.asp='1'}\n\n```{.r .cell-code}\n# Chord Network\nAdj_Matrix <- get.adjacency(graph.data.frame(df |> select(V1, V2)), sparse=FALSE) # This method produces n by n matrices\nnetworkD3::chordNetwork(\n  Adj_Matrix,\n  labels = rownames(Adj_Matrix),\n  height = 600,\n  width = 750\n)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-07d6bc3f5372c4c1f4c4\" style=\"width:750px;height:600px;\" class=\"chordNetwork html-widget \"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-07d6bc3f5372c4c1f4c4\">{\"x\":{\"matrix\":[[1,4,1,0,0,22,0,8,1,1,4,0,0,3,0,0,1,2,0,1,0,0,0,0,0,0,0,3,0,0,0,0,0],[0,0,4,1,2,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0],[1,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0],[2,0,1,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,1,2,0,0,0,0,0],[6,0,0,0,2,4,0,5,0,0,4,0,0,1,0,0,0,3,0,1,0,0,0,1,0,0,0,1,2,0,1,0,1],[0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[6,0,1,0,0,4,0,0,0,0,3,0,0,0,0,0,2,1,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0],[1,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,0,0,0,2,0,1,0,0,0,0,0,1,0,0,1,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,0,1,0,0,5,0,1,0,0,2,0,1,0,0,1,0,1,0,1,0,1,1,0,0,0,0,0,0,0,1,0,0],[0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,0,0,0,0,1,0,0,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[3,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],\"options\":{\"width\":750,\"height\":600,\"use_ticks\":0,\"initial_opacity\":0.8,\"colour_scale\":[\"#1f77b4\",\"#aec7e8\",\"#ff7f0e\",\"#ffbb78\",\"#2ca02c\",\"#98df8a\",\"#d62728\",\"#ff9896\",\"#9467bd\",\"#c5b0d5\",\"#8c564b\",\"#c49c94\",\"#e377c2\",\"#f7b6d2\",\"#7f7f7f\",\"#c7c7c7\",\"#bcbd22\",\"#dbdb8d\",\"#17becf\",\"#9edae5\"],\"padding\":0.1,\"font_size\":14,\"font_family\":\"sans-serif\",\"labels\":[\"Beren\",\"Barahir\",\"Morgoth\",\"Gorlim\",\"Sauron\",\"Lúthien\",\"Daeron\",\"Thingol\",\"Finrod\",\"Bëor\",\"Celegorm\",\"Orodreth\",\"Oromë\",\"Huan\",\"Varda\",\"Draugluin\",\"Fëanor\",\"Curufin\",\"Celebrimbor\",\"Carcharoth\",\"Maglor\",\"Mablung\",\"Beleg\",\"Mandos\",\"Manwë\",\"Angrim\",\"Eilinel\",\"Melian\",\"Ilúvatar\",\"Finarfin\",\"Thuringwethil\",\"Thorondor\",\"Turgon\"],\"label_distance\":30}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\n## Dendrograms\n\nDendrograms can be used in two ways -\n\n1.  To show hierarchies (e.g. a team's corporate hierarchy)\n2.  To show similarities between items in a group (e.g. similiarities between plant species based on select characteristics)\n\nHere, I am using a dendrogram to show \"closeness\" between the characters.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# This method produces m by n matrices\nAdj_Matrix2 <- table(df |> select(V1, V2))\nhc <- hclust(dist(Adj_Matrix2), method = \"complete\")\n\nnetworkD3::dendroNetwork(\n  hc,\n  height = 1250,\n  fontSize = 14,\n  nodeStroke = \"midnightblue\"\n)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-8bc2d9714d4c9e76eef7\" style=\"width:100%;height:1015px;\" class=\"dendroNetwork html-widget \"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-8bc2d9714d4c9e76eef7\">{\"x\":{\"root\":{\"name\":\"\",\"y\":24.83948469674844,\"children\":[{\"name\":\"Beren\",\"y\":0,\"textColour\":\"#111\",\"textOpacity\":0.9},{\"name\":\"\",\"y\":13.15294643796591,\"children\":[{\"name\":\"Celegorm\",\"y\":0,\"textColour\":\"#111\",\"textOpacity\":0.9},{\"name\":\"\",\"y\":11.35781669160055,\"children\":[{\"name\":\"\",\"y\":6.082762530298219,\"children\":[{\"name\":\"Barahir\",\"y\":0,\"textColour\":\"#111\",\"textOpacity\":0.9},{\"name\":\"\",\"y\":4.795831523312719,\"children\":[{\"name\":\"Sauron\",\"y\":0,\"textColour\":\"#111\",\"textOpacity\":0.9},{\"name\":\"\",\"y\":4.242640687119285,\"children\":[{\"name\":\"Mablung\",\"y\":0,\"textColour\":\"#111\",\"textOpacity\":0.9},{\"name\":\"\",\"y\":3.464101615137754,\"children\":[{\"name\":\"\",\"y\":2.449489742783178,\"children\":[{\"name\":\"Curufin\",\"y\":0,\"textColour\":\"#111\",\"textOpacity\":0.9},{\"name\":\"Morgoth\",\"y\":0,\"textColour\":\"#111\",\"textOpacity\":0.9}]},{\"name\":\"\",\"y\":2.82842712474619,\"children\":[{\"name\":\"\",\"y\":2.449489742783178,\"children\":[{\"name\":\"Finrod\",\"y\":0,\"textColour\":\"#111\",\"textOpacity\":0.9},{\"name\":\"Gorlim\",\"y\":0,\"textColour\":\"#111\",\"textOpacity\":0.9}]},{\"name\":\"\",\"y\":2.645751311064591,\"children\":[{\"name\":\"\",\"y\":1.732050807568877,\"children\":[{\"name\":\"Carcharoth\",\"y\":0,\"textColour\":\"#111\",\"textOpacity\":0.9},{\"name\":\"\",\"y\":1.414213562373095,\"children\":[{\"name\":\"Beleg\",\"y\":0,\"textColour\":\"#111\",\"textOpacity\":0.9},{\"name\":\"Daeron\",\"y\":0,\"textColour\":\"#111\",\"textOpacity\":0.9}]}]},{\"name\":\"\",\"y\":2,\"children\":[{\"name\":\"Oromë\",\"y\":0,\"textColour\":\"#111\",\"textOpacity\":0.9},{\"name\":\"\",\"y\":2,\"children\":[{\"name\":\"\",\"y\":1,\"children\":[{\"name\":\"Celebrimbor\",\"y\":0,\"textColour\":\"#111\",\"textOpacity\":0.9},{\"name\":\"\",\"y\":0,\"children\":[{\"name\":\"Fëanor\",\"y\":0,\"textColour\":\"#111\",\"textOpacity\":0.9},{\"name\":\"Orodreth\",\"y\":0,\"textColour\":\"#111\",\"textOpacity\":0.9}]}]},{\"name\":\"\",\"y\":1.414213562373095,\"children\":[{\"name\":\"Varda\",\"y\":0,\"textColour\":\"#111\",\"textOpacity\":0.9},{\"name\":\"\",\"y\":1.414213562373095,\"children\":[{\"name\":\"\",\"y\":0,\"children\":[{\"name\":\"Mandos\",\"y\":0,\"textColour\":\"#111\",\"textOpacity\":0.9},{\"name\":\"Manwë\",\"y\":0,\"textColour\":\"#111\",\"textOpacity\":0.9}]},{\"name\":\"\",\"y\":1.414213562373095,\"children\":[{\"name\":\"Maglor\",\"y\":0,\"textColour\":\"#111\",\"textOpacity\":0.9},{\"name\":\"\",\"y\":1.414213562373095,\"children\":[{\"name\":\"Bëor\",\"y\":0,\"textColour\":\"#111\",\"textOpacity\":0.9},{\"name\":\"Draugluin\",\"y\":0,\"textColour\":\"#111\",\"textOpacity\":0.9}]}]}]}]}]}]}]}]}]}]}]}]},{\"name\":\"\",\"y\":7.615773105863909,\"children\":[{\"name\":\"Lúthien\",\"y\":0,\"textColour\":\"#111\",\"textOpacity\":0.9},{\"name\":\"\",\"y\":6.164414002968976,\"children\":[{\"name\":\"Huan\",\"y\":0,\"textColour\":\"#111\",\"textOpacity\":0.9},{\"name\":\"Thingol\",\"y\":0,\"textColour\":\"#111\",\"textOpacity\":0.9}]}]}]}]}]},\"options\":{\"height\":1250,\"width\":800,\"fontSize\":14,\"linkColour\":\"#ccc\",\"nodeColour\":\"#fff\",\"nodeStroke\":\"midnightblue\",\"textRotate\":0,\"margins\":{\"top\":40,\"right\":150,\"bottom\":40,\"left\":40},\"opacity\":0.9,\"linkType\":\"elbow\",\"treeOrientation\":\"horizontal\",\"zoom\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n",
    "supporting": [
      "silmarillion-analysis_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\n<script src=\"site_libs/d3-4.5.0/d3.min.js\"></script>\n<script src=\"site_libs/forceNetwork-binding-0.4/forceNetwork.js\"></script>\n<script src=\"site_libs/chordNetwork-binding-0.4/chordNetwork.js\"></script>\n<script src=\"site_libs/dendroNetwork-binding-0.4/dendroNetwork.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}